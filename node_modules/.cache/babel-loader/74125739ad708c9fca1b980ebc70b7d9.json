{"remainingRequest":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/babel-loader/lib/index.js!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue","mtime":1637704279000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/babel-loader/lib/index.js","mtime":1637705426000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js","mtime":1637705662000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KaW1wb3J0IG1hcGJveGdsIGZyb20gIm1hcGJveC1nbCI7CmltcG9ydCB0aHJlZWJveCBmcm9tICJ0aHJlZWJveC1wbHVnaW4vZGlzdC90aHJlZWJveCI7CmltcG9ydCBQdWxzZSBmcm9tICIuL1B1bHNlcy9QdWxzZSI7CmxldCBwdWxzZSA9IG5ldyBQdWxzZSg0MDAsIDQwMDAsIHRydWUpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRocmVlYm94RXhhbXBsZSIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2Nlc3NUb2tlbjogInBrLmV5SjFJam9pWVc1a1pYSnpMV2h2WldSb2IyeDBJaXdpWVNJNkltTnFORGx5TURGd1p6QnZNSGd5ZUhCbmF6UXdZMnBpZUdzaWZRLkZDdFdtbTR4dEZQZUtRQjMzQ2VNZVEiCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IHRoaXMuYWNjZXNzVG9rZW47CiAgICB0aGlzLm1hcCA9IG5ldyBtYXBib3hnbC5NYXAoewogICAgICBjb250YWluZXI6ICJtYXAiLAogICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSwKICAgICAgc3R5bGU6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3NhdGVsbGl0ZS12OSIsCiAgICAgIHpvb206IDE0LjUsCiAgICAgIGNlbnRlcjogWzEwLjIyNDY2NiwgNTYuMTY1NF0sCiAgICAgIHBpdGNoOiA2MCwKICAgICAgYmVhcmluZzogMjcwLAogICAgICBhbnRpYWxpYXM6IHRydWUKICAgIH0pLm9uKCJzdHlsZS5sb2FkIiwgKCkgPT4gewogICAgICB3aW5kb3cudGIgPSBuZXcgVGhyZWVib3godGhpcy5tYXAsIHRoaXMubWFwLmdldENhbnZhcygpLmdldENvbnRleHQoIndlYmdsIiksIHsKICAgICAgICBkZWZhdWx0TGlnaHRzOiB0cnVlCiAgICAgIH0pOwoKICAgICAgbGV0IF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm1hcC5nZXRMYXllcigiY3VzdG9tX2xheWVyIikgPT0gbnVsbCkgewogICAgICAgIHRoaXMubWFwLmFkZExheWVyKHsKICAgICAgICAgIGlkOiAiY3VzdG9tX2xheWVyIiwKICAgICAgICAgIHR5cGU6ICJjdXN0b20iLAogICAgICAgICAgcmVuZGVyaW5nTW9kZTogIjNkIiwKICAgICAgICAgIG9uQWRkOiBmdW5jdGlvbiAobWFwLCBtYnhDb250ZXh0KSB7CiAgICAgICAgICAgIHdpbmRvdy50Yi5hZGQoX3RoaXMuc3BoZXJlKDEwLjIyNTUzMSwgNTYuMTY1NzQ2KSk7CiAgICAgICAgICAgIHdpbmRvdy50Yi5hZGQoX3RoaXMuc3BoZXJlKDEwLjIxOTI4NywgNTYuMTY3NSkpOwogICAgICAgICAgICBsZXQgcHVsc2VPYmogPSB3aW5kb3cudGIuT2JqZWN0M0QoewogICAgICAgICAgICAgIG9iajogcHVsc2UsCiAgICAgICAgICAgICAgdW5pdHM6ICJtZXRlcnMiCiAgICAgICAgICAgIH0pLnNldENvb3JkcyhbMTAuMjMyMTkxLCA1Ni4xNjU1NDMsIDBdKTsKICAgICAgICAgICAgcHVsc2VPYmouc2V0QW5jaG9yKCJib3R0b20tbGVmdCIpOwogICAgICAgICAgICB3aW5kb3cudGIuYWRkKHB1bHNlT2JqKTsKICAgICAgICAgIH0sCiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChnbCwgbWF0cml4KSB7CiAgICAgICAgICAgIHdpbmRvdy50Yi51cGRhdGUoKTsKCiAgICAgICAgICAgIF90aGlzLmFuaW1hdGVQdWxzZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzcGhlcmUobG9uLCBsYXQpIHsKICAgICAgbGV0IG9yaWdpbiA9IFtsb24sIGxhdCwgMF07CiAgICAgIHJldHVybiB3aW5kb3cudGIuc3BoZXJlKHsKICAgICAgICBjb2xvcjogInJlZCIsCiAgICAgICAgbWF0ZXJpYWw6ICJNZXNoVG9vbk1hdGVyaWFsIgogICAgICB9KS5zZXRDb29yZHMob3JpZ2luKTsKICAgIH0sCgogICAgYW5pbWF0ZVB1bHNlKCkgewogICAgICBwdWxzZS51cGRhdGUoKTsKICAgICAgdGhpcy5tYXAudHJpZ2dlclJlcGFpbnQoKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["ThreeboxExample.vue"],"names":[],"mappings":";;;;AAKA,OAAA,QAAA,MAAA,WAAA;AACA,OAAA,QAAA,MAAA,+BAAA;AACA,OAAA,KAAA,MAAA,gBAAA;AAEA,IAAA,KAAA,GAAA,IAAA,KAAA,CAAA,GAAA,EAAA,IAAA,EAAA,IAAA,CAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,WAAA,EACA;AAFA,KAAA;AAIA,GAPA;;AAQA,EAAA,OAAA,GAAA;AACA,IAAA,QAAA,CAAA,WAAA,GAAA,KAAA,WAAA;AAEA,SAAA,GAAA,GAAA,IAAA,QAAA,CAAA,GAAA,CAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,KAAA,EAAA,qCAHA;AAIA,MAAA,IAAA,EAAA,IAJA;AAKA,MAAA,MAAA,EAAA,CAAA,SAAA,EAAA,OAAA,CALA;AAMA,MAAA,KAAA,EAAA,EANA;AAOA,MAAA,OAAA,EAAA,GAPA;AAQA,MAAA,SAAA,EAAA;AARA,KAAA,EASA,EATA,CASA,YATA,EASA,MAAA;AACA,MAAA,MAAA,CAAA,EAAA,GAAA,IAAA,QAAA,CACA,KAAA,GADA,EAEA,KAAA,GAAA,CAAA,SAAA,GAAA,UAAA,CAAA,OAAA,CAFA,EAGA;AACA,QAAA,aAAA,EAAA;AADA,OAHA,CAAA;;AAQA,UAAA,KAAA,GAAA,IAAA;;AAEA,UAAA,KAAA,GAAA,CAAA,QAAA,CAAA,cAAA,KAAA,IAAA,EAAA;AACA,aAAA,GAAA,CAAA,QAAA,CAAA;AACA,UAAA,EAAA,EAAA,cADA;AAEA,UAAA,IAAA,EAAA,QAFA;AAGA,UAAA,aAAA,EAAA,IAHA;AAKA,UAAA,KAAA,EAAA,UAAA,GAAA,EAAA,UAAA,EAAA;AACA,YAAA,MAAA,CAAA,EAAA,CAAA,GAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,EAAA,SAAA,CAAA;AACA,YAAA,MAAA,CAAA,EAAA,CAAA,GAAA,CAAA,KAAA,CAAA,MAAA,CAAA,SAAA,EAAA,OAAA,CAAA;AAEA,gBAAA,QAAA,GAAA,MAAA,CAAA,EAAA,CACA,QADA,CACA;AAAA,cAAA,GAAA,EAAA,KAAA;AAAA,cAAA,KAAA,EAAA;AAAA,aADA,EAEA,SAFA,CAEA,CAAA,SAAA,EAAA,SAAA,EAAA,CAAA,CAFA,CAAA;AAIA,YAAA,QAAA,CAAA,SAAA,CAAA,aAAA;AAEA,YAAA,MAAA,CAAA,EAAA,CAAA,GAAA,CAAA,QAAA;AACA,WAhBA;AAiBA,UAAA,MAAA,EAAA,UAAA,EAAA,EAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,EAAA,CAAA,MAAA;;AACA,YAAA,KAAA,CAAA,YAAA;AACA;AApBA,SAAA;AAsBA;AACA,KA5CA,CAAA;AA6CA,GAxDA;;AAyDA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,CAAA,GAAA,EAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,CAAA,GAAA,EAAA,GAAA,EAAA,CAAA,CAAA;AACA,aAAA,MAAA,CAAA,EAAA,CACA,MADA,CACA;AAAA,QAAA,KAAA,EAAA,KAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OADA,EAEA,SAFA,CAEA,MAFA,CAAA;AAGA,KANA;;AAOA,IAAA,YAAA,GAAA;AACA,MAAA,KAAA,CAAA,MAAA;AACA,WAAA,GAAA,CAAA,cAAA;AACA;;AAVA;AAzDA,CAAA","sourcesContent":["<template>\n  <div id=\"map\" />\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport threebox from \"threebox-plugin/dist/threebox\";\nimport Pulse from \"./Pulses/Pulse\";\n\nlet pulse = new Pulse(400, 4000, true);\n\nexport default {\n  name: \"ThreeboxExample\",\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1IjoiYW5kZXJzLWhvZWRob2x0IiwiYSI6ImNqNDlyMDFwZzBvMHgyeHBnazQwY2pieGsifQ.FCtWmm4xtFPeKQB33CeMeQ\",\n    };\n  },\n  mounted() {\n    mapboxgl.accessToken = this.accessToken;\n\n    this.map = new mapboxgl.Map({\n      container: \"map\",\n      interactive: true,\n      style: \"mapbox://styles/mapbox/satellite-v9\",\n      zoom: 14.5,\n      center: [10.224666, 56.1654],\n      pitch: 60,\n      bearing: 270,\n      antialias: true,\n    }).on(\"style.load\", () => {\n      window.tb = new Threebox(\n        this.map,\n        this.map.getCanvas().getContext(\"webgl\"),\n        {\n          defaultLights: true,\n        }\n      );\n\n      let _this = this;\n\n      if (this.map.getLayer(\"custom_layer\") == null) {\n        this.map.addLayer({\n          id: \"custom_layer\",\n          type: \"custom\",\n          renderingMode: \"3d\",\n\n          onAdd: function (map, mbxContext) {\n            window.tb.add(_this.sphere(10.225531, 56.165746));\n            window.tb.add(_this.sphere(10.219287, 56.1675));\n\n            let pulseObj = window.tb\n              .Object3D({ obj: pulse, units: \"meters\" })\n              .setCoords([10.232191, 56.165543, 0]);\n\n            pulseObj.setAnchor(\"bottom-left\");\n\n            window.tb.add(pulseObj);\n          },\n          render: function (gl, matrix) {\n            window.tb.update();\n            _this.animatePulse();\n          },\n        });\n      }\n    });\n  },\n  methods: {\n    sphere(lon, lat) {\n      let origin = [lon, lat, 0];\n      return window.tb\n        .sphere({ color: \"red\", material: \"MeshToonMaterial\" })\n        .setCoords(origin);\n    },\n    animatePulse() {\n      pulse.update();\n      this.map.triggerRepaint();\n    },\n  },\n};\n</script>\n\n<style scoped>\n#map {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n}\n</style>"],"sourceRoot":"src/components"}]}