{"remainingRequest":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue","mtime":1638379651000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/babel-loader/lib/index.js","mtime":1637705426000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js","mtime":1637705662000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiOwppbXBvcnQgKiBhcyBNYXBib3hEcmF3IGZyb20gJ21hcGJveC1nbC1kcmF3JzsKaW1wb3J0IHRocmVlYm94IGZyb20gInRocmVlYm94LXBsdWdpbi9kaXN0L3RocmVlYm94IjsKaW1wb3J0IHsgVGhyZWVib3ggfSBmcm9tICd0aHJlZWJveC1wbHVnaW4nOwppbXBvcnQgUHVsc2UgZnJvbSAiLi9QdWxzZXMvUHVsc2UiOwppbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnOwoKCmxldCBwdWxzZSA9IG5ldyBQdWxzZSg0MDAsIDQwMDAsIHRydWUpOwp0aHJlZWJveAoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUaHJlZWJveEV4YW1wbGUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2Nlc3NUb2tlbjoKICAgICAgICAicGsuZXlKMUlqb2libWxqYUc5c1lYTnRZWEowYVc1dklpd2lZU0k2SW1Ock1qVmhPR3BoT1RBelpHVXpiRzh3TkhKaGRUWnJNbVlpZlEuOTh1RE1uR0l2bjF6cnc0WldVTzM1ZyIsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gdGhpcy5hY2Nlc3NUb2tlbjsKCiAgICB0aGlzLm1hcCA9IG5ldyBtYXBib3hnbC5NYXAoewogICAgICBjb250YWluZXI6ICJtYXAiLAogICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSwKICAgICAgc3R5bGU6ICAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9saWdodC12MTAiLAogICAgICB6b29tOiAxNiwKICAgICAgY2VudGVyOiBbLTEyMy4xMDY4NjU4LCA0OS4yNjI2OTgyXSwKICAgICAgcGl0Y2g6IDYwLAogICAgICBiZWFyaW5nOiAzNjAsCiAgICAgIGFudGlhbGlhczogdHJ1ZSwKICAgICAgLy8gYXR0cmlidXRpb25Db250cm9sOiBmYWxzZQogICAgfSkub24oInN0eWxlLmxvYWQiLCAoKSA9PiB7CiAgICAgIHdpbmRvdy50YiA9IG5ldyBUaHJlZWJveCgKICAgICAgICB0aGlzLm1hcCwKICAgICAgICB0aGlzLm1hcC5nZXRDYW52YXMoKS5nZXRDb250ZXh0KCJ3ZWJnbCIpLAogICAgICAgIHsKICAgICAgICAgIGRlZmF1bHRMaWdodHM6IHRydWUsCiAgICAgICAgfQogICAgICApOwoKICAgICAgLy8gbGV0IF90aGlzID0gdGhpczsKCiAgICAgIC8vIEFkZCBkcmF3IGNvbnRyb2wKICAgICAgaWYgKHRoaXMubWFwLmdldExheWVyKCJjdXN0b21fbGF5ZXIiKSA9PSBudWxsKSB7CgogICAgICAgIHRoaXMubWFwLm9uKCdsb2FkJywgKCkgPT4gewoKICAgICAgICAgIC8vIC8vIEFkZCAzRCB0ZXJyYWluCiAgICAgICAgICAvLyB0aGlzLm1hcC5hZGRTb3VyY2UoJ21hcGJveC1kZW0nLCB7CiAgICAgICAgICAvLyAgICd0eXBlJzogJ3Jhc3Rlci1kZW0nLAogICAgICAgICAgLy8gICAndXJsJzogJ21hcGJveDovL21hcGJveC5tYXBib3gtdGVycmFpbi1kZW0tdjEnLAogICAgICAgICAgLy8gICAndGlsZVNpemUnOiA1MTIsCiAgICAgICAgICAvLyAgICdtYXh6b29tJzogMjAKICAgICAgICAgIC8vIH0pOwogICAgICAgICAgLy8KICAgICAgICAgIC8vIC8vIGFkZCB0aGUgREVNIHNvdXJjZSBhcyBhIHRlcnJhaW4gbGF5ZXIgd2l0aCBleGFnZ2VyYXRlZCBoZWlnaHQKICAgICAgICAgIC8vIHRoaXMubWFwLnNldFRlcnJhaW4oeyAnc291cmNlJzogJ21hcGJveC1kZW0nLCAnZXhhZ2dlcmF0aW9uJzogMS41IH0pOwoKICAgICAgICAgIC8vIC8vIEFkZCBwYXJjZWxzIGxheWVyIHNvdXJjZSAoQ29WKQogICAgICAgICAgLy8gdGhpcy5tYXAuYWRkU291cmNlKCdwcm9wZXJ0eS1wYXJjZWwtcG9seWdvbnMnLCB7CiAgICAgICAgICAvLyAgICd0eXBlJzogJ2dlb2pzb24nLAogICAgICAgICAgLy8gICAnZGF0YSc6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbmljaG9sYXNtYXJ0aW5vL3Z1ZS10aHJlZWJveC9tYXN0ZXIvcHVibGljL2RhdGEvcHJvcGVydHktcGFyY2VsLXBvbHlnb25zLmdlb2pzb24nLAogICAgICAgICAgLy8gfSk7CiAgICAgICAgICAvLwogICAgICAgICAgLy8gLy8gQWRkIHBhcmNlbHMgbGF5ZXIgdG8gbWFwCiAgICAgICAgICAvLyB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAvLyAgICdpZCc6ICdwcm9wZXJ0eS1wYXJjZWwtcG9seWdvbnMtc2hwJywKICAgICAgICAgIC8vICAgJ3R5cGUnOiAnZmlsbCcsCiAgICAgICAgICAvLyAgICdzb3VyY2UnOiAncHJvcGVydHktcGFyY2VsLXBvbHlnb25zJywKICAgICAgICAgIC8vICAgJ3BhaW50JzogewogICAgICAgICAgLy8gICAgICdmaWxsLWNvbG9yJzogJyMwMDgwZmYnLCAvLyBibHVlIGNvbG9yIGZpbGwKICAgICAgICAgIC8vICAgICAnZmlsbC1vcGFjaXR5JzogMC4yLAogICAgICAgICAgLy8gICB9LAogICAgICAgICAgLy8gfSk7CgogICAgICAgICAgLy8gVGhlICdidWlsZGluZycgbGF5ZXIgaW4gdGhlIE1hcGJveCBTdHJlZXRzCiAgICAgICAgICAvLyB2ZWN0b3IgdGlsZXNldCBjb250YWlucyBidWlsZGluZyBoZWlnaHQgZGF0YQogICAgICAgICAgLy8gZnJvbSBPcGVuU3RyZWV0TWFwLgogICAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAnaWQnOiAnYWRkLTNkLWJ1aWxkaW5ncycsCiAgICAgICAgICAgICdzb3VyY2UnOiAnY29tcG9zaXRlJywKICAgICAgICAgICAgJ3NvdXJjZS1sYXllcic6ICdidWlsZGluZycsCiAgICAgICAgICAgICdmaWx0ZXInOiBbJz09JywgJ2V4dHJ1ZGUnLCAndHJ1ZSddLAogICAgICAgICAgICAndHlwZSc6ICdmaWxsLWV4dHJ1c2lvbicsCiAgICAgICAgICAgICdtaW56b29tJzogMTIsCiAgICAgICAgICAgICdwYWludCc6IHsKICAgICAgICAgICAgICAnZmlsbC1leHRydXNpb24tY29sb3InOiAnI2FhYScsCgogICAgICAgICAgICAgIC8vIFVzZSBhbiAnaW50ZXJwb2xhdGUnIGV4cHJlc3Npb24gdG8KICAgICAgICAgICAgICAvLyBhZGQgYSBzbW9vdGggdHJhbnNpdGlvbiBlZmZlY3QgdG8KICAgICAgICAgICAgICAvLyB0aGUgYnVpbGRpbmdzIGFzIHRoZSB1c2VyIHpvb21zIGluLgogICAgICAgICAgICAgICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnOiBbCiAgICAgICAgICAgICAgICAnaW50ZXJwb2xhdGUnLAogICAgICAgICAgICAgICAgWydsaW5lYXInXSwKICAgICAgICAgICAgICAgIFsnem9vbSddLAogICAgICAgICAgICAgICAgOSwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAxNS4wNSwKICAgICAgICAgICAgICAgIFsnZ2V0JywgJ2hlaWdodCddCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAnZmlsbC1leHRydXNpb24tYmFzZSc6IFsKICAgICAgICAgICAgICAgICdpbnRlcnBvbGF0ZScsCiAgICAgICAgICAgICAgICBbJ2xpbmVhciddLAogICAgICAgICAgICAgICAgWyd6b29tJ10sCiAgICAgICAgICAgICAgICA5LAogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIDE1LjA1LAogICAgICAgICAgICAgICAgWydnZXQnLCAnbWluX2hlaWdodCddCiAgICAgICAgICAgICAgXSwKCiAgICAgICAgICAgICAgLy8gJ2ZpbGwtZXh0cnVzaW9uLWhlaWdodCc6IFsnZ2V0JywgJ2hlaWdodCddLAogICAgICAgICAgICAgICdmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5JzogMC44LAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CgogICAgICAgIH0pOwoKICAgICAgICAvLyAvLyBBZGQgc3BoZXJlcyB0byBtYXAKICAgICAgICAvLyB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgLy8gICBpZDogImN1c3RvbV9sYXllciIsCiAgICAgICAgLy8gICB0eXBlOiAiY3VzdG9tIiwKICAgICAgICAvLyAgIHJlbmRlcmluZ01vZGU6ICIzZCIsCiAgICAgICAgLy8KICAgICAgICAvLyAgIG9uQWRkOiBmdW5jdGlvbiAobWFwLCBtYnhDb250ZXh0KSB7CiAgICAgICAgLy8gICAgIHdpbmRvdy50Yi5hZGQoX3RoaXMuc3BoZXJlKC0xMjMuMTA2ODY1OCwgNDkuMjYyNjk4MikpOwogICAgICAgIC8vICAgICB3aW5kb3cudGIuYWRkKF90aGlzLnNwaGVyZSgtMTIzLjEwODg2NTgsIDQ5LjI2MjY5ODIpKTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBsZXQgcHVsc2VPYmogPSB3aW5kb3cudGIKICAgICAgICAvLyAgICAgICAuT2JqZWN0M0QoeyBvYmo6IHB1bHNlLCB1bml0czogIm1ldGVycyIgfSkKICAgICAgICAvLyAgICAgICAuc2V0Q29vcmRzKFstMTIzLjEwNjg2NTgsIDQ5LjI2MjY5ODIsIDBdKTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBwdWxzZU9iai5zZXRBbmNob3IoImJvdHRvbS1sZWZ0Iik7CiAgICAgICAgLy8KICAgICAgICAvLyAgICAgd2luZG93LnRiLmFkZChwdWxzZU9iaik7CiAgICAgICAgLy8gICB9LAogICAgICAgIC8vICAgcmVuZGVyOiBmdW5jdGlvbiAoZ2wsIG1hdHJpeCkgewogICAgICAgIC8vICAgICB3aW5kb3cudGIudXBkYXRlKCk7CiAgICAgICAgLy8gICAgIF90aGlzLmFuaW1hdGVQdWxzZSgpOwogICAgICAgIC8vICAgfSwKICAgICAgICAvLyB9KTsKCiAgICAgIH0KICAgIH0pOwoKICAgIC8vIEFkZCBkcmF3IGNvbnRyb2xzCiAgICBjb25zdCBkcmF3ID0gbmV3IE1hcGJveERyYXcoKTsKICAgIHRoaXMubWFwLmFkZENvbnRyb2woZHJhdywgJ3RvcC1yaWdodCcpOwoKICAgIC8vIEV4dHJhY3QgYm91bmRhcnkgb2YgcG9seWdvbgogICAgZnVuY3Rpb24gZGl2aWRlUG9sKCl7CiAgICAgIGNvbnN0IGRhdGEgPSBkcmF3LmdldEFsbCgpOwogICAgICBjb25zdCBwb2wgPSB0dXJmLnBvbHlnb24oZGF0YSkKICAgICAgY29uc3QgbGluZSA9IHR1cmYucG9seWdvblRvTGluZShwb2wpOwogICAgICBjb25zb2xlLmxvZyhsaW5lKQogICAgICBjb25zdCBjaHVua3MgPSB0dXJmLmxpbmVDaHVuayhsaW5lLCAwLjEpCiAgICAgIGNvbnNvbGUubG9nKGNodW5rcykKICAgICAgY29uc29sZS5sb2coY2h1bmtzLmxlbmd0aCkKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBzZWcgPSB0dXJmLmxpbmVTdHJpbmcoY2h1bmtzW2ldKQogICAgICAgIGNvbnNvbGUubG9nKHR1cmYuY2VudHJvaWQoc2VnKSkKICAgICAgfQogICAgICByZXR1cm4gY2h1bmtzCiAgICB9CgogICAgLy8gQ2FsY3VsYXRlIHRoZSBhcmVhIG9mIGRyYXduIHBvbHlnb25zCiAgICBmdW5jdGlvbiB1cGRhdGVBcmVhKCkgewogICAgICAgIGNvbnN0IGRhdGEgPSBkcmF3LmdldEFsbCgpOwogICAgICAgIGNvbnN0IGFuc3dlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjdWxhdGVkLWFyZWEnKTsKICAgICAgICBpZiAoZGF0YS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBhcmVhID0gdHVyZi5hcmVhKGRhdGEpOwoKICAgICAgICAgIC8vIFJlc3RyaWN0IHRoZSBhcmVhIHRvIDIgZGVjaW1hbCBwb2ludHMuCiAgICAgICAgICBjb25zdCByb3VuZGVkX2FyZWEgPSBNYXRoLnJvdW5kKGFyZWEgKiAxMDApIC8gMTAwOwogICAgICAgICAgYW5zd2VyLmlubmVySFRNTCA9IGA8cD48c3Ryb25nPiR7cm91bmRlZF9hcmVhfTwvc3Ryb25nPiBtwrI8L3A+YDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYW5zd2VyLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgLy8gaWYgKGUudHlwZSAhPT0gJ2RyYXcuZGVsZXRlJykKICAgICAgICAgIC8vICAgYWxlcnQoJ0NsaWNrIHRoZSBtYXAgdG8gZHJhdyBhIHBvbHlnb24uJyk7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLm1hcC5vbignZHJhdy5jcmVhdGUnLCB1cGRhdGVBcmVhKTsKICAgIHRoaXMubWFwLm9uKCdkcmF3LmRlbGV0ZScsIHVwZGF0ZUFyZWEpOwogICAgdGhpcy5tYXAub24oJ2RyYXcudXBkYXRlJywgdXBkYXRlQXJlYSk7CgogICAgdGhpcy5tYXAub24oJ2RyYXcuY3JlYXRlJywgKCkgPT4gewogICAgICBjb25zb2xlLmxvZyhkaXZpZGVQb2woKSkKICAgICAgdGhpcy5tYXAuYWRkU291cmNlKCdkcmF3JywgewogICAgICAgICd0eXBlJzogJ2dlb2pzb24nLAogICAgICAgICdkYXRhJzogZGl2aWRlUG9sKCksCiAgICAgIH0pOwogICAgICB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgJ2lkJzogJ291dGxpbmUnLAogICAgICAgICd0eXBlJzogJ2NpcmNsZScsCiAgICAgICAgJ3NvdXJjZSc6ICdkcmF3JywKICAgICAgICAncGFpbnQnOiB7CiAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogJyNGODRDNEMnLAogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICB0aGlzLm1hcC5vbignZHJhdy5kZWxldGUnLCAoKSA9PiB7CiAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKCdvdXRsaW5lJykKICAgICAgdGhpcy5tYXAucmVtb3ZlU291cmNlKCdkcmF3JykKICAgIH0pOwoKICAgIHRoaXMubWFwLm9uKCdkcmF3LnVwZGF0ZScsICgpID0+IHsKICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIoJ291dGxpbmUnKQogICAgICB0aGlzLm1hcC5yZW1vdmVTb3VyY2UoJ2RyYXcnKQogICAgICB0aGlzLm1hcC5hZGRTb3VyY2UoJ2RyYXcnLCB7CiAgICAgICAgJ3R5cGUnOiAnZ2VvanNvbicsCiAgICAgICAgJ2RhdGEnOiBkaXZpZGVQb2woKSwKICAgICAgfSk7CiAgICAgIHRoaXMubWFwLmFkZExheWVyKHsKICAgICAgICAnaWQnOiAnb3V0bGluZScsCiAgICAgICAgJ3R5cGUnOiAnY2lyY2xlJywKICAgICAgICAnc291cmNlJzogJ2RyYXcnLAogICAgICAgICdwYWludCc6IHsKICAgICAgICAgICdjaXJjbGUtcmFkaXVzJzogMTAsCiAgICAgICAgICAnY2lyY2xlLWNvbG9yJzogJyNGODRDNEMnIC8vIHJlZCBjb2xvcgogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgfSwKICBtZXRob2RzOiB7CiAgICBzcGhlcmUobG9uLCBsYXQpIHsKICAgICAgbGV0IG9yaWdpbiA9IFtsb24sIGxhdCwgMF07CiAgICAgIHJldHVybiB3aW5kb3cudGIKICAgICAgICAuc3BoZXJlKHsgY29sb3I6ICJyZWQiLCBtYXRlcmlhbDogIk1lc2hUb29uTWF0ZXJpYWwiIH0pCiAgICAgICAgLnNldENvb3JkcyhvcmlnaW4pOwogICAgfSwKICAgIGFuaW1hdGVQdWxzZSgpIHsKICAgICAgcHVsc2UudXBkYXRlKCk7CiAgICAgIHRoaXMubWFwLnRyaWdnZXJSZXBhaW50KCk7CiAgICB9LAogIH0sCgp9OwoK"},{"version":3,"sources":["ThreeboxExample.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ThreeboxExample.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"map\"></div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport * as MapboxDraw from 'mapbox-gl-draw';\nimport threebox from \"threebox-plugin/dist/threebox\";\nimport { Threebox } from 'threebox-plugin';\nimport Pulse from \"./Pulses/Pulse\";\nimport * as turf from '@turf/turf';\n\n\nlet pulse = new Pulse(400, 4000, true);\nthreebox\n\nexport default {\n  name: \"ThreeboxExample\",\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1IjoibmljaG9sYXNtYXJ0aW5vIiwiYSI6ImNrMjVhOGphOTAzZGUzbG8wNHJhdTZrMmYifQ.98uDMnGIvn1zrw4ZWUO35g\",\n    };\n  },\n  mounted() {\n    mapboxgl.accessToken = this.accessToken;\n\n    this.map = new mapboxgl.Map({\n      container: \"map\",\n      interactive: true,\n      style:  \"mapbox://styles/mapbox/light-v10\",\n      zoom: 16,\n      center: [-123.1068658, 49.2626982],\n      pitch: 60,\n      bearing: 360,\n      antialias: true,\n      // attributionControl: false\n    }).on(\"style.load\", () => {\n      window.tb = new Threebox(\n        this.map,\n        this.map.getCanvas().getContext(\"webgl\"),\n        {\n          defaultLights: true,\n        }\n      );\n\n      // let _this = this;\n\n      // Add draw control\n      if (this.map.getLayer(\"custom_layer\") == null) {\n\n        this.map.on('load', () => {\n\n          // // Add 3D terrain\n          // this.map.addSource('mapbox-dem', {\n          //   'type': 'raster-dem',\n          //   'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n          //   'tileSize': 512,\n          //   'maxzoom': 20\n          // });\n          //\n          // // add the DEM source as a terrain layer with exaggerated height\n          // this.map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n\n          // // Add parcels layer source (CoV)\n          // this.map.addSource('property-parcel-polygons', {\n          //   'type': 'geojson',\n          //   'data': 'https://raw.githubusercontent.com/nicholasmartino/vue-threebox/master/public/data/property-parcel-polygons.geojson',\n          // });\n          //\n          // // Add parcels layer to map\n          // this.map.addLayer({\n          //   'id': 'property-parcel-polygons-shp',\n          //   'type': 'fill',\n          //   'source': 'property-parcel-polygons',\n          //   'paint': {\n          //     'fill-color': '#0080ff', // blue color fill\n          //     'fill-opacity': 0.2,\n          //   },\n          // });\n\n          // The 'building' layer in the Mapbox Streets\n          // vector tileset contains building height data\n          // from OpenStreetMap.\n          this.map.addLayer({\n            'id': 'add-3d-buildings',\n            'source': 'composite',\n            'source-layer': 'building',\n            'filter': ['==', 'extrude', 'true'],\n            'type': 'fill-extrusion',\n            'minzoom': 12,\n            'paint': {\n              'fill-extrusion-color': '#aaa',\n\n              // Use an 'interpolate' expression to\n              // add a smooth transition effect to\n              // the buildings as the user zooms in.\n              'fill-extrusion-height': [\n                'interpolate',\n                ['linear'],\n                ['zoom'],\n                9,\n                0,\n                15.05,\n                ['get', 'height']\n              ],\n              'fill-extrusion-base': [\n                'interpolate',\n                ['linear'],\n                ['zoom'],\n                9,\n                0,\n                15.05,\n                ['get', 'min_height']\n              ],\n\n              // 'fill-extrusion-height': ['get', 'height'],\n              'fill-extrusion-opacity': 0.8,\n            },\n          });\n\n        });\n\n        // // Add spheres to map\n        // this.map.addLayer({\n        //   id: \"custom_layer\",\n        //   type: \"custom\",\n        //   renderingMode: \"3d\",\n        //\n        //   onAdd: function (map, mbxContext) {\n        //     window.tb.add(_this.sphere(-123.1068658, 49.2626982));\n        //     window.tb.add(_this.sphere(-123.1088658, 49.2626982));\n        //\n        //     let pulseObj = window.tb\n        //       .Object3D({ obj: pulse, units: \"meters\" })\n        //       .setCoords([-123.1068658, 49.2626982, 0]);\n        //\n        //     pulseObj.setAnchor(\"bottom-left\");\n        //\n        //     window.tb.add(pulseObj);\n        //   },\n        //   render: function (gl, matrix) {\n        //     window.tb.update();\n        //     _this.animatePulse();\n        //   },\n        // });\n\n      }\n    });\n\n    // Add draw controls\n    const draw = new MapboxDraw();\n    this.map.addControl(draw, 'top-right');\n\n    // Extract boundary of polygon\n    function dividePol(){\n      const data = draw.getAll();\n      const pol = turf.polygon(data)\n      const line = turf.polygonToLine(pol);\n      console.log(line)\n      const chunks = turf.lineChunk(line, 0.1)\n      console.log(chunks)\n      console.log(chunks.length)\n      for (let i = 0; i < chunks.length; i++) {\n        const seg = turf.lineString(chunks[i])\n        console.log(turf.centroid(seg))\n      }\n      return chunks\n    }\n\n    // Calculate the area of drawn polygons\n    function updateArea() {\n        const data = draw.getAll();\n        const answer = document.getElementById('calculated-area');\n        if (data.features.length > 0) {\n          const area = turf.area(data);\n\n          // Restrict the area to 2 decimal points.\n          const rounded_area = Math.round(area * 100) / 100;\n          answer.innerHTML = `<p><strong>${rounded_area}</strong> m²</p>`;\n        } else {\n          answer.innerHTML = '';\n          // if (e.type !== 'draw.delete')\n          //   alert('Click the map to draw a polygon.');\n      }\n    }\n\n    this.map.on('draw.create', updateArea);\n    this.map.on('draw.delete', updateArea);\n    this.map.on('draw.update', updateArea);\n\n    this.map.on('draw.create', () => {\n      console.log(dividePol())\n      this.map.addSource('draw', {\n        'type': 'geojson',\n        'data': dividePol(),\n      });\n      this.map.addLayer({\n        'id': 'outline',\n        'type': 'circle',\n        'source': 'draw',\n        'paint': {\n          'circle-color': '#F84C4C',\n        }\n      });\n    });\n\n    this.map.on('draw.delete', () => {\n      this.map.removeLayer('outline')\n      this.map.removeSource('draw')\n    });\n\n    this.map.on('draw.update', () => {\n      this.map.removeLayer('outline')\n      this.map.removeSource('draw')\n      this.map.addSource('draw', {\n        'type': 'geojson',\n        'data': dividePol(),\n      });\n      this.map.addLayer({\n        'id': 'outline',\n        'type': 'circle',\n        'source': 'draw',\n        'paint': {\n          'circle-radius': 10,\n          'circle-color': '#F84C4C' // red color\n        }\n      });\n    });\n\n  },\n  methods: {\n    sphere(lon, lat) {\n      let origin = [lon, lat, 0];\n      return window.tb\n        .sphere({ color: \"red\", material: \"MeshToonMaterial\" })\n        .setCoords(origin);\n    },\n    animatePulse() {\n      pulse.update();\n      this.map.triggerRepaint();\n    },\n  },\n\n};\n\n</script>\n\n<style>\n#map {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n}\n@import \"https://api.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.css\";\n@import \"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css\";\n.mapboxgl-ctrl-group button {\n    width: 29px;\n    height: 29px;\n    display: block;\n    padding: 0;\n    outline: none;\n    border: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    cursor: pointer;\n    overflow: hidden;\n}\n.mapboxgl-ctrl-top-right {\n    top: 0;\n    right: 0;\n    position: absolute;\n}\n</style>\n"]}]}