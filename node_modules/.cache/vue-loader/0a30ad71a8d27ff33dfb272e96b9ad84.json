{"remainingRequest":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue","mtime":1637704279000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/babel-loader/lib/index.js","mtime":1637705426000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js","mtime":1637705662000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiOwppbXBvcnQgdGhyZWVib3ggZnJvbSAidGhyZWVib3gtcGx1Z2luL2Rpc3QvdGhyZWVib3giOwppbXBvcnQgUHVsc2UgZnJvbSAiLi9QdWxzZXMvUHVsc2UiOwoKbGV0IHB1bHNlID0gbmV3IFB1bHNlKDQwMCwgNDAwMCwgdHJ1ZSk7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRocmVlYm94RXhhbXBsZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY2Vzc1Rva2VuOgogICAgICAgICJway5leUoxSWpvaVlXNWtaWEp6TFdodlpXUm9iMngwSWl3aVlTSTZJbU5xTkRseU1ERndaekJ2TUhneWVIQm5helF3WTJwaWVHc2lmUS5GQ3RXbW00eHRGUGVLUUIzM0NlTWVRIiwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSB0aGlzLmFjY2Vzc1Rva2VuOwoKICAgIHRoaXMubWFwID0gbmV3IG1hcGJveGdsLk1hcCh7CiAgICAgIGNvbnRhaW5lcjogIm1hcCIsCiAgICAgIGludGVyYWN0aXZlOiB0cnVlLAogICAgICBzdHlsZTogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvc2F0ZWxsaXRlLXY5IiwKICAgICAgem9vbTogMTQuNSwKICAgICAgY2VudGVyOiBbMTAuMjI0NjY2LCA1Ni4xNjU0XSwKICAgICAgcGl0Y2g6IDYwLAogICAgICBiZWFyaW5nOiAyNzAsCiAgICAgIGFudGlhbGlhczogdHJ1ZSwKICAgIH0pLm9uKCJzdHlsZS5sb2FkIiwgKCkgPT4gewogICAgICB3aW5kb3cudGIgPSBuZXcgVGhyZWVib3goCiAgICAgICAgdGhpcy5tYXAsCiAgICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuZ2V0Q29udGV4dCgid2ViZ2wiKSwKICAgICAgICB7CiAgICAgICAgICBkZWZhdWx0TGlnaHRzOiB0cnVlLAogICAgICAgIH0KICAgICAgKTsKCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoImN1c3RvbV9sYXllciIpID09IG51bGwpIHsKICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgICBpZDogImN1c3RvbV9sYXllciIsCiAgICAgICAgICB0eXBlOiAiY3VzdG9tIiwKICAgICAgICAgIHJlbmRlcmluZ01vZGU6ICIzZCIsCgogICAgICAgICAgb25BZGQ6IGZ1bmN0aW9uIChtYXAsIG1ieENvbnRleHQpIHsKICAgICAgICAgICAgd2luZG93LnRiLmFkZChfdGhpcy5zcGhlcmUoMTAuMjI1NTMxLCA1Ni4xNjU3NDYpKTsKICAgICAgICAgICAgd2luZG93LnRiLmFkZChfdGhpcy5zcGhlcmUoMTAuMjE5Mjg3LCA1Ni4xNjc1KSk7CgogICAgICAgICAgICBsZXQgcHVsc2VPYmogPSB3aW5kb3cudGIKICAgICAgICAgICAgICAuT2JqZWN0M0QoeyBvYmo6IHB1bHNlLCB1bml0czogIm1ldGVycyIgfSkKICAgICAgICAgICAgICAuc2V0Q29vcmRzKFsxMC4yMzIxOTEsIDU2LjE2NTU0MywgMF0pOwoKICAgICAgICAgICAgcHVsc2VPYmouc2V0QW5jaG9yKCJib3R0b20tbGVmdCIpOwoKICAgICAgICAgICAgd2luZG93LnRiLmFkZChwdWxzZU9iaik7CiAgICAgICAgICB9LAogICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoZ2wsIG1hdHJpeCkgewogICAgICAgICAgICB3aW5kb3cudGIudXBkYXRlKCk7CiAgICAgICAgICAgIF90aGlzLmFuaW1hdGVQdWxzZSgpOwogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzcGhlcmUobG9uLCBsYXQpIHsKICAgICAgbGV0IG9yaWdpbiA9IFtsb24sIGxhdCwgMF07CiAgICAgIHJldHVybiB3aW5kb3cudGIKICAgICAgICAuc3BoZXJlKHsgY29sb3I6ICJyZWQiLCBtYXRlcmlhbDogIk1lc2hUb29uTWF0ZXJpYWwiIH0pCiAgICAgICAgLnNldENvb3JkcyhvcmlnaW4pOwogICAgfSwKICAgIGFuaW1hdGVQdWxzZSgpIHsKICAgICAgcHVsc2UudXBkYXRlKCk7CiAgICAgIHRoaXMubWFwLnRyaWdnZXJSZXBhaW50KCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["ThreeboxExample.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThreeboxExample.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"map\" />\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport threebox from \"threebox-plugin/dist/threebox\";\nimport Pulse from \"./Pulses/Pulse\";\n\nlet pulse = new Pulse(400, 4000, true);\n\nexport default {\n  name: \"ThreeboxExample\",\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1IjoiYW5kZXJzLWhvZWRob2x0IiwiYSI6ImNqNDlyMDFwZzBvMHgyeHBnazQwY2pieGsifQ.FCtWmm4xtFPeKQB33CeMeQ\",\n    };\n  },\n  mounted() {\n    mapboxgl.accessToken = this.accessToken;\n\n    this.map = new mapboxgl.Map({\n      container: \"map\",\n      interactive: true,\n      style: \"mapbox://styles/mapbox/satellite-v9\",\n      zoom: 14.5,\n      center: [10.224666, 56.1654],\n      pitch: 60,\n      bearing: 270,\n      antialias: true,\n    }).on(\"style.load\", () => {\n      window.tb = new Threebox(\n        this.map,\n        this.map.getCanvas().getContext(\"webgl\"),\n        {\n          defaultLights: true,\n        }\n      );\n\n      let _this = this;\n\n      if (this.map.getLayer(\"custom_layer\") == null) {\n        this.map.addLayer({\n          id: \"custom_layer\",\n          type: \"custom\",\n          renderingMode: \"3d\",\n\n          onAdd: function (map, mbxContext) {\n            window.tb.add(_this.sphere(10.225531, 56.165746));\n            window.tb.add(_this.sphere(10.219287, 56.1675));\n\n            let pulseObj = window.tb\n              .Object3D({ obj: pulse, units: \"meters\" })\n              .setCoords([10.232191, 56.165543, 0]);\n\n            pulseObj.setAnchor(\"bottom-left\");\n\n            window.tb.add(pulseObj);\n          },\n          render: function (gl, matrix) {\n            window.tb.update();\n            _this.animatePulse();\n          },\n        });\n      }\n    });\n  },\n  methods: {\n    sphere(lon, lat) {\n      let origin = [lon, lat, 0];\n      return window.tb\n        .sphere({ color: \"red\", material: \"MeshToonMaterial\" })\n        .setCoords(origin);\n    },\n    animatePulse() {\n      pulse.update();\n      this.map.triggerRepaint();\n    },\n  },\n};\n</script>\n\n<style scoped>\n#map {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n}\n</style>"]}]}