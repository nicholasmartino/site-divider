{"remainingRequest":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/src/components/ThreeboxExample.vue","mtime":1637980017000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/babel-loader/lib/index.js","mtime":1637705426000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/cache-loader/dist/cjs.js","mtime":1637704935000},{"path":"/Volumes/GoogleDrive/My Drive/JavaScript/vue-threebox-sample/node_modules/vue-loader/lib/index.js","mtime":1637705662000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiOwppbXBvcnQgKiBhcyBNYXBib3hEcmF3IGZyb20gJ21hcGJveC1nbC1kcmF3JzsKaW1wb3J0IHRocmVlYm94IGZyb20gInRocmVlYm94LXBsdWdpbi9kaXN0L3RocmVlYm94IjsKaW1wb3J0IHsgVGhyZWVib3ggfSBmcm9tICd0aHJlZWJveC1wbHVnaW4nOwppbXBvcnQgUHVsc2UgZnJvbSAiLi9QdWxzZXMvUHVsc2UiOwoKbGV0IHB1bHNlID0gbmV3IFB1bHNlKDQwMCwgNDAwMCwgdHJ1ZSk7CnRocmVlYm94CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRocmVlYm94RXhhbXBsZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjY2Vzc1Rva2VuOgogICAgICAgICJway5leUoxSWpvaWJtbGphRzlzWVhOdFlYSjBhVzV2SWl3aVlTSTZJbU5yTWpWaE9HcGhPVEF6WkdVemJHOHdOSEpoZFRack1tWWlmUS45OHVETW5HSXZuMXpydzRaV1VPMzVnIiwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSB0aGlzLmFjY2Vzc1Rva2VuOwoKICAgIHRoaXMubWFwID0gbmV3IG1hcGJveGdsLk1hcCh7CiAgICAgIGNvbnRhaW5lcjogIm1hcCIsCiAgICAgIGludGVyYWN0aXZlOiB0cnVlLAogICAgICBzdHlsZTogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvbGlnaHQtdjEwIiwKICAgICAgem9vbTogMTYsCiAgICAgIGNlbnRlcjogWy0xMjMuMTA2ODY1OCwgNDkuMjYyNjk4Ml0sCiAgICAgIHBpdGNoOiA2MCwKICAgICAgYmVhcmluZzogMzYwLAogICAgICBhbnRpYWxpYXM6IHRydWUsCiAgICB9KS5vbigic3R5bGUubG9hZCIsICgpID0+IHsKICAgICAgd2luZG93LnRiID0gbmV3IFRocmVlYm94KAogICAgICAgIHRoaXMubWFwLAogICAgICAgIHRoaXMubWFwLmdldENhbnZhcygpLmdldENvbnRleHQoIndlYmdsIiksCiAgICAgICAgewogICAgICAgICAgZGVmYXVsdExpZ2h0czogdHJ1ZSwKICAgICAgICB9CiAgICAgICk7CgogICAgICAvLyBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gQWRkIGRyYXcgY29udHJvbAogICAgICBpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoImN1c3RvbV9sYXllciIpID09IG51bGwpIHsKICAgICAgICBjb25zdCBkcmF3ID0gbmV3IE1hcGJveERyYXcoewogICAgICAgICAgICBkaXNwbGF5Q29udHJvbHNEZWZhdWx0OiBmYWxzZSwKICAgICAgICAgICAgLy8gU2VsZWN0IHdoaWNoIG1hcGJveC1nbC1kcmF3IGNvbnRyb2wgYnV0dG9ucyB0byBhZGQgdG8gdGhlIG1hcC4KICAgICAgICAgICAgY29udHJvbHM6IHsKICAgICAgICAgICAgICBwb2x5Z29uOiB0cnVlLAogICAgICAgICAgICAgIHRyYXNoOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFNldCBtYXBib3gtZ2wtZHJhdyB0byBkcmF3IGJ5IGRlZmF1bHQuCiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGRvZXMgbm90IGhhdmUgdG8gY2xpY2sgdGhlIHBvbHlnb24gY29udHJvbCBidXR0b24gZmlyc3QuCiAgICAgICAgICAgIGRlZmF1bHRNb2RlOiAnZHJhd19wb2x5Z29uJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLm1hcC5hZGRDb250cm9sKGRyYXcpOwoKICAgICAgICB0aGlzLm1hcC5vbignbG9hZCcsICgpID0+IHsKCiAgICAgICAgICAvLyBBZGQgM0QgdGVycmFpbgogICAgICAgICAgdGhpcy5tYXAuYWRkU291cmNlKCdtYXBib3gtZGVtJywgewogICAgICAgICAgICAndHlwZSc6ICdyYXN0ZXItZGVtJywKICAgICAgICAgICAgJ3VybCc6ICdtYXBib3g6Ly9tYXBib3gubWFwYm94LXRlcnJhaW4tZGVtLXYxJywKICAgICAgICAgICAgJ3RpbGVTaXplJzogNTEyLAogICAgICAgICAgICAnbWF4em9vbSc6IDIwCiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIGFkZCB0aGUgREVNIHNvdXJjZSBhcyBhIHRlcnJhaW4gbGF5ZXIgd2l0aCBleGFnZ2VyYXRlZCBoZWlnaHQKICAgICAgICAgIHRoaXMubWFwLnNldFRlcnJhaW4oeyAnc291cmNlJzogJ21hcGJveC1kZW0nLCAnZXhhZ2dlcmF0aW9uJzogMS41IH0pOwoKICAgICAgICAgIC8vIEFkZCBwYXJjZWxzIGxheWVyIHNvdXJjZSAoQ29WKQogICAgICAgICAgdGhpcy5tYXAuYWRkU291cmNlKCdwcm9wZXJ0eS1wYXJjZWwtcG9seWdvbnMnLCB7CiAgICAgICAgICAgICd0eXBlJzogJ2dlb2pzb24nLAogICAgICAgICAgICAnZGF0YSc6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbmljaG9sYXNtYXJ0aW5vL3Z1ZS10aHJlZWJveC9tYXN0ZXIvcHVibGljL2RhdGEvcHJvcGVydHktcGFyY2VsLXBvbHlnb25zLmdlb2pzb24nLAogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gQWRkIHBhcmNlbHMgbGF5ZXIgdG8gbWFwCiAgICAgICAgICB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgICAgICdpZCc6ICdwcm9wZXJ0eS1wYXJjZWwtcG9seWdvbnMtc2hwJywKICAgICAgICAgICAgJ3R5cGUnOiAnZmlsbCcsCiAgICAgICAgICAgICdzb3VyY2UnOiAncHJvcGVydHktcGFyY2VsLXBvbHlnb25zJywKICAgICAgICAgICAgJ3BhaW50JzogewogICAgICAgICAgICAgICdmaWxsLWNvbG9yJzogJyMwMDgwZmYnLCAvLyBibHVlIGNvbG9yIGZpbGwKICAgICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4yLAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gVGhlICdidWlsZGluZycgbGF5ZXIgaW4gdGhlIE1hcGJveCBTdHJlZXRzCiAgICAgICAgICAvLyB2ZWN0b3IgdGlsZXNldCBjb250YWlucyBidWlsZGluZyBoZWlnaHQgZGF0YQogICAgICAgICAgLy8gZnJvbSBPcGVuU3RyZWV0TWFwLgogICAgICAgICAgdGhpcy5tYXAuYWRkTGF5ZXIoewogICAgICAgICAgICAnaWQnOiAnYWRkLTNkLWJ1aWxkaW5ncycsCiAgICAgICAgICAgICdzb3VyY2UnOiAnY29tcG9zaXRlJywKICAgICAgICAgICAgJ3NvdXJjZS1sYXllcic6ICdidWlsZGluZycsCiAgICAgICAgICAgICdmaWx0ZXInOiBbJz09JywgJ2V4dHJ1ZGUnLCAndHJ1ZSddLAogICAgICAgICAgICAndHlwZSc6ICdmaWxsLWV4dHJ1c2lvbicsCiAgICAgICAgICAgICdtaW56b29tJzogMTIsCiAgICAgICAgICAgICdwYWludCc6IHsKICAgICAgICAgICAgICAnZmlsbC1leHRydXNpb24tY29sb3InOiAnI2FhYScsCgogICAgICAgICAgICAgIC8vIC8vIFVzZSBhbiAnaW50ZXJwb2xhdGUnIGV4cHJlc3Npb24gdG8KICAgICAgICAgICAgICAvLyAvLyBhZGQgYSBzbW9vdGggdHJhbnNpdGlvbiBlZmZlY3QgdG8KICAgICAgICAgICAgICAvLyAvLyB0aGUgYnVpbGRpbmdzIGFzIHRoZSB1c2VyIHpvb21zIGluLgogICAgICAgICAgICAgIC8vICdmaWxsLWV4dHJ1c2lvbi1oZWlnaHQnOiBbCiAgICAgICAgICAgICAgLy8gICAnaW50ZXJwb2xhdGUnLAogICAgICAgICAgICAgIC8vICAgWydsaW5lYXInXSwKICAgICAgICAgICAgICAvLyAgIFsnem9vbSddLAogICAgICAgICAgICAgIC8vICAgOSwKICAgICAgICAgICAgICAvLyAgIDAsCiAgICAgICAgICAgICAgLy8gICAxNS4wNSwKICAgICAgICAgICAgICAvLyAgIFsnZ2V0JywgJ2hlaWdodCddCiAgICAgICAgICAgICAgLy8gXSwKICAgICAgICAgICAgICAvLyAnZmlsbC1leHRydXNpb24tYmFzZSc6IFsKICAgICAgICAgICAgICAvLyAgICdpbnRlcnBvbGF0ZScsCiAgICAgICAgICAgICAgLy8gICBbJ2xpbmVhciddLAogICAgICAgICAgICAgIC8vICAgWyd6b29tJ10sCiAgICAgICAgICAgICAgLy8gICA5LAogICAgICAgICAgICAgIC8vICAgMCwKICAgICAgICAgICAgICAvLyAgIDE1LjA1LAogICAgICAgICAgICAgIC8vICAgWydnZXQnLCAnbWluX2hlaWdodCddCiAgICAgICAgICAgICAgLy8gXSwKCiAgICAgICAgICAgICAgJ2ZpbGwtZXh0cnVzaW9uLWhlaWdodCc6IFsnZ2V0JywgJ2hlaWdodCddLAogICAgICAgICAgICAgICdmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5JzogMC44LAogICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgKTsKCgoKICAgICAgICB9KTsKCgoKICAgICAgICAvLyAvLyBBZGQgc3BoZXJlcyB0byBtYXAKICAgICAgICAvLyB0aGlzLm1hcC5hZGRMYXllcih7CiAgICAgICAgLy8gICBpZDogImN1c3RvbV9sYXllciIsCiAgICAgICAgLy8gICB0eXBlOiAiY3VzdG9tIiwKICAgICAgICAvLyAgIHJlbmRlcmluZ01vZGU6ICIzZCIsCiAgICAgICAgLy8KICAgICAgICAvLyAgIG9uQWRkOiBmdW5jdGlvbiAobWFwLCBtYnhDb250ZXh0KSB7CiAgICAgICAgLy8gICAgIHdpbmRvdy50Yi5hZGQoX3RoaXMuc3BoZXJlKC0xMjMuMTA2ODY1OCwgNDkuMjYyNjk4MikpOwogICAgICAgIC8vICAgICB3aW5kb3cudGIuYWRkKF90aGlzLnNwaGVyZSgtMTIzLjEwODg2NTgsIDQ5LjI2MjY5ODIpKTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBsZXQgcHVsc2VPYmogPSB3aW5kb3cudGIKICAgICAgICAvLyAgICAgICAuT2JqZWN0M0QoeyBvYmo6IHB1bHNlLCB1bml0czogIm1ldGVycyIgfSkKICAgICAgICAvLyAgICAgICAuc2V0Q29vcmRzKFstMTIzLjEwNjg2NTgsIDQ5LjI2MjY5ODIsIDBdKTsKICAgICAgICAvLwogICAgICAgIC8vICAgICBwdWxzZU9iai5zZXRBbmNob3IoImJvdHRvbS1sZWZ0Iik7CiAgICAgICAgLy8KICAgICAgICAvLyAgICAgd2luZG93LnRiLmFkZChwdWxzZU9iaik7CiAgICAgICAgLy8gICB9LAogICAgICAgIC8vICAgcmVuZGVyOiBmdW5jdGlvbiAoZ2wsIG1hdHJpeCkgewogICAgICAgIC8vICAgICB3aW5kb3cudGIudXBkYXRlKCk7CiAgICAgICAgLy8gICAgIF90aGlzLmFuaW1hdGVQdWxzZSgpOwogICAgICAgIC8vICAgfSwKICAgICAgICAvLyB9KTsKCiAgICAgIH0KICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc3BoZXJlKGxvbiwgbGF0KSB7CiAgICAgIGxldCBvcmlnaW4gPSBbbG9uLCBsYXQsIDBdOwogICAgICByZXR1cm4gd2luZG93LnRiCiAgICAgICAgLnNwaGVyZSh7IGNvbG9yOiAicmVkIiwgbWF0ZXJpYWw6ICJNZXNoVG9vbk1hdGVyaWFsIiB9KQogICAgICAgIC5zZXRDb29yZHMob3JpZ2luKTsKICAgIH0sCiAgICBhbmltYXRlUHVsc2UoKSB7CiAgICAgIHB1bHNlLnVwZGF0ZSgpOwogICAgICB0aGlzLm1hcC50cmlnZ2VyUmVwYWludCgpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["ThreeboxExample.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThreeboxExample.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"map\" />\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport * as MapboxDraw from 'mapbox-gl-draw';\nimport threebox from \"threebox-plugin/dist/threebox\";\nimport { Threebox } from 'threebox-plugin';\nimport Pulse from \"./Pulses/Pulse\";\n\nlet pulse = new Pulse(400, 4000, true);\nthreebox\n\nexport default {\n  name: \"ThreeboxExample\",\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1IjoibmljaG9sYXNtYXJ0aW5vIiwiYSI6ImNrMjVhOGphOTAzZGUzbG8wNHJhdTZrMmYifQ.98uDMnGIvn1zrw4ZWUO35g\",\n    };\n  },\n  mounted() {\n    mapboxgl.accessToken = this.accessToken;\n\n    this.map = new mapboxgl.Map({\n      container: \"map\",\n      interactive: true,\n      style: \"mapbox://styles/mapbox/light-v10\",\n      zoom: 16,\n      center: [-123.1068658, 49.2626982],\n      pitch: 60,\n      bearing: 360,\n      antialias: true,\n    }).on(\"style.load\", () => {\n      window.tb = new Threebox(\n        this.map,\n        this.map.getCanvas().getContext(\"webgl\"),\n        {\n          defaultLights: true,\n        }\n      );\n\n      // let _this = this;\n\n      // Add draw control\n      if (this.map.getLayer(\"custom_layer\") == null) {\n        const draw = new MapboxDraw({\n            displayControlsDefault: false,\n            // Select which mapbox-gl-draw control buttons to add to the map.\n            controls: {\n              polygon: true,\n              trash: true\n            },\n            // Set mapbox-gl-draw to draw by default.\n            // The user does not have to click the polygon control button first.\n            defaultMode: 'draw_polygon'\n          });\n          this.map.addControl(draw);\n\n        this.map.on('load', () => {\n\n          // Add 3D terrain\n          this.map.addSource('mapbox-dem', {\n            'type': 'raster-dem',\n            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n            'tileSize': 512,\n            'maxzoom': 20\n          });\n          // add the DEM source as a terrain layer with exaggerated height\n          this.map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n\n          // Add parcels layer source (CoV)\n          this.map.addSource('property-parcel-polygons', {\n            'type': 'geojson',\n            'data': 'https://raw.githubusercontent.com/nicholasmartino/vue-threebox/master/public/data/property-parcel-polygons.geojson',\n          });\n\n          // Add parcels layer to map\n          this.map.addLayer({\n            'id': 'property-parcel-polygons-shp',\n            'type': 'fill',\n            'source': 'property-parcel-polygons',\n            'paint': {\n              'fill-color': '#0080ff', // blue color fill\n              'fill-opacity': 0.2,\n            },\n          });\n\n          // The 'building' layer in the Mapbox Streets\n          // vector tileset contains building height data\n          // from OpenStreetMap.\n          this.map.addLayer({\n            'id': 'add-3d-buildings',\n            'source': 'composite',\n            'source-layer': 'building',\n            'filter': ['==', 'extrude', 'true'],\n            'type': 'fill-extrusion',\n            'minzoom': 12,\n            'paint': {\n              'fill-extrusion-color': '#aaa',\n\n              // // Use an 'interpolate' expression to\n              // // add a smooth transition effect to\n              // // the buildings as the user zooms in.\n              // 'fill-extrusion-height': [\n              //   'interpolate',\n              //   ['linear'],\n              //   ['zoom'],\n              //   9,\n              //   0,\n              //   15.05,\n              //   ['get', 'height']\n              // ],\n              // 'fill-extrusion-base': [\n              //   'interpolate',\n              //   ['linear'],\n              //   ['zoom'],\n              //   9,\n              //   0,\n              //   15.05,\n              //   ['get', 'min_height']\n              // ],\n\n              'fill-extrusion-height': ['get', 'height'],\n              'fill-extrusion-opacity': 0.8,\n            },\n            },\n          );\n\n\n\n        });\n\n\n\n        // // Add spheres to map\n        // this.map.addLayer({\n        //   id: \"custom_layer\",\n        //   type: \"custom\",\n        //   renderingMode: \"3d\",\n        //\n        //   onAdd: function (map, mbxContext) {\n        //     window.tb.add(_this.sphere(-123.1068658, 49.2626982));\n        //     window.tb.add(_this.sphere(-123.1088658, 49.2626982));\n        //\n        //     let pulseObj = window.tb\n        //       .Object3D({ obj: pulse, units: \"meters\" })\n        //       .setCoords([-123.1068658, 49.2626982, 0]);\n        //\n        //     pulseObj.setAnchor(\"bottom-left\");\n        //\n        //     window.tb.add(pulseObj);\n        //   },\n        //   render: function (gl, matrix) {\n        //     window.tb.update();\n        //     _this.animatePulse();\n        //   },\n        // });\n\n      }\n    });\n  },\n  methods: {\n    sphere(lon, lat) {\n      let origin = [lon, lat, 0];\n      return window.tb\n        .sphere({ color: \"red\", material: \"MeshToonMaterial\" })\n        .setCoords(origin);\n    },\n    animatePulse() {\n      pulse.update();\n      this.map.triggerRepaint();\n    },\n  },\n};\n</script>\n\n<style scoped>\n#map {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n}\n</style>\n"]}]}